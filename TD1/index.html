<!DOCTYPE html>
<html>
  <head>
    <title>TP1 GeoCarto</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <h2>Affichage avec watchPosition()</h2>
    <p>Latitude: <span id="latitude"></span></p>
    <p>Longitude: <span id="longitude"></span></p>
    <p>Altitude: <span id="altitude"></span></p>
    <p>Accuracy: <span id="accuracy"></span></p>
    <p>Speed: <span id="speed"></span></p>
    <p>Timestamp: <span id="timestamp"></span></p>

    <h2>Affichage avec getCurrentPosition()</h2>
    <p>Latitude: <span id="latitude1"></span></p>
    <p>Longitude: <span id="longitude1"></span></p>
    <p>Altitude: <span id="altitude1"></span></p>
    <p>Accuracy: <span id="accuracy1"></span></p>
    <p>Speed: <span id="speed1"></span></p>
    <p>Timestamp: <span id="timestamp1"></span></p>

    <h2>L’orientation du smartphone alpha, beta, gamma</h2>
    <p>Alpha: <span id="alpha"></span></p>
    <p>Beta: <span id="beta"></span></p>
    <p>Gamma: <span id="gamma"></span></p>

    <h2>
      Le mouvement du smartphone : accélération en rotation et translation
    </h2>
    <p>Acceleration X: <span id="acceleration-x"></span></p>
    <p>Acceleration Y: <span id="acceleration-y"></span></p>
    <p>Acceleration Z: <span id="acceleration-z"></span></p>
    <p>
      Acceleration Including Gravity X:
      <span id="acceleration-including-gravity-x"></span>
    </p>
    <p>
      Acceleration Including Gravity Y:
      <span id="acceleration-including-gravity-y"></span>
    </p>
    <p>
      Acceleration Including Gravity Z:
      <span id="acceleration-including-gravity-z"></span>
    </p>
    <p>Rotation Rate Alpha: <span id="rotation-rate-alpha"></span></p>
    <p>Rotation Rate Beta: <span id="rotation-rate-beta"></span></p>
    <p>Rotation Rate Gamma: <span id="arotation-rate-gamma"></span></p>

    <h2>Touch event avec smartphone</h2>
    <div id="output"></div>
    <canvas id="canvas" style="border: 2px solid #e66465;"></canvas>
  </body>
  <script type="text/javascript">
    if (navigator.geolocation) {
      navigator.geolocation.watchPosition(function (position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var altitude = position.coords.altitude;
        var accuracy = position.coords.accuracy;
        var speed = position.coords.speed;
        var timestamp = position.timestamp;

        // Afficher les données sur la page Web
        document.getElementById("latitude").innerHTML = latitude;
        document.getElementById("longitude").innerHTML = longitude;
        document.getElementById("altitude").innerHTML = altitude;
        document.getElementById("accuracy").innerHTML = accuracy;
        document.getElementById("speed").innerHTML = speed;
        document.getElementById("timestamp").innerHTML = timestamp;
      });
    } else {
      // La géolocalisation n'est pas disponible
      document.getElementById("latitude").innerHTML =
        "Geolocation is not available.";
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function (position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var altitude = position.coords.altitude;
        var accuracy = position.coords.accuracy;
        var speed = position.coords.speed;
        var timestamp = position.timestamp;

        // Afficher les données sur la page Web
        document.getElementById("latitude1").innerHTML = latitude;
        document.getElementById("longitude1").innerHTML = longitude;
        document.getElementById("altitude1").innerHTML = altitude;
        document.getElementById("accuracy1").innerHTML = accuracy;
        document.getElementById("speed1").innerHTML = speed;
        document.getElementById("timestamp1").innerHTML = timestamp;
      });
    } else {
      // La géolocalisation n'est pas disponible
      document.getElementById("latitude1").innerHTML =
        "Geolocation is not available.";
    }

    if (window.DeviceOrientationEvent) {
      window.addEventListener("deviceorientation", function (event) {
        var alpha = event.alpha;
        var beta = event.beta;
        var gamma = event.gamma;

        // Afficher les données sur la page Web
        document.getElementById("alpha").innerHTML = alpha;
        document.getElementById("beta").innerHTML = beta;
        document.getElementById("gamma").innerHTML = gamma;
      });
    } else {
      // L'orientation du smartphone n'est pas disponible
      document.getElementById("alpha").innerHTML =
        "Device orientation is not available.";
    }

    if (window.DeviceMotionEvent) {
      window.addEventListener("devicemotion", function (event) {
        var acceleration = event.acceleration;
        var accelerationIncludingGravity = event.accelerationIncludingGravity;
        var rotationRate = event.rotationRate;

        console.log(acceleration.x);
        // Afficher les données sur la page Web
        document.getElementById("acceleration-x").innerHTML = acceleration.x;
        document.getElementById("acceleration-y").innerHTML = acceleration.y;
        document.getElementById("acceleration-z").innerHTML = acceleration.z;
        document.getElementById("acceleration-including-gravity-x").innerHTML =
          accelerationIncludingGravity.x;
        document.getElementById("acceleration-including-gravity-y").innerHTML =
          accelerationIncludingGravity.y;
        document.getElementById("acceleration-including-gravity-z").innerHTML =
          accelerationIncludingGravity.z;
        document.getElementById("rotation-rate-alpha").innerHTML =
          rotationRate.alpha;
        document.getElementById("rotation-rate-beta").innerHTML =
          rotationRate.beta;
      });
    } else {
      // Le mouvement du smartphone n'est pas disponible
      document.getElementById("acceleration-x").innerHTML =
        "Device motion is not available.";
    }

    const output = document.getElementById('output');
    const canvas = document.getElementById('canvas');
    let isDrawing = false;
    let x = 0;
    let y = 0;
    
    function draw(event) {
      if (isDrawing) {
        const ctx = canvas.getContext('2d');
        ctx.lineWidth = 5;
        ctx.lineCap = 'round';
        ctx.strokeStyle = 'black';
        ctx.beginPath();
        ctx.moveTo(x, y);
        x = event.touches[0].clientX;
        y = event.touches[0].clientY;
        ctx.lineTo(x, y);
        ctx.stroke();
      }
    }
    
    canvas.addEventListener('touchstart', event => {
      isDrawing = true;
      x = event.touches[0].clientX;
      y = event.touches[0].clientY;
      output.innerHTML = `Type: touchstart<br>X: ${x}<br>Y: ${y}`;
    });
    
    canvas.addEventListener('touchmove', event => {
      event.preventDefault();
      draw(event);
      output.innerHTML = `Type: touchmove<br>X: ${x}<br>Y: ${y}`;
    });
    
    canvas.addEventListener('touchend', event => {
      isDrawing = false;
      output.innerHTML = `Type: touchend<br>X: ${x}<br>Y: ${y}`;
    });
  </script>
</html>
